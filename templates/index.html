{% extends "base.html" %}

{% block content %}
    <h1 class="mb-4">Dashboard</h1>

    <h2>Recent Issues</h2>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Status</th>
                <th></th>
            </tr>
        </thead>
            <tbody>
                {% for issue in issues %}
                <tr>
                    <td>{{ issue[0] }}</td>
                    <td>{{ issue[1] }}</td>
                    <td class="
                    {% if issue[3] == 'Open' %}
                    status-open
                    {% elif issue[3] == 'In-Progress' %}
                        status-in-progress
                    {% elif issue[3] == 'Closed' %}
                        status-closed
                    {% endif %}
                    ">{{ issue[3] }}</td>
                    <td><a class="pure-menu-link" href="/issue_{{ issue[0] }}">View</a></td>
                </tr>
                {% endfor %}
            </tbody>
    </table>

    <div class="carousel-wrapper row justify-content-center">
        <div id="issuesCarousel" class="carousel slide col-lg-6" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="img-fluid d-block mx-auto" src="{{ url_for('static', filename='images/issues_status_graph.png') }}" alt="Issues Status Graph">
                </div>
                
                <div class="carousel-item">
                    <img class="img-fluid d-block mx-auto" src="{{ url_for('static', filename='images/issues_archived_status_graph.png') }}" alt="Archived Issues Status Graph">
                </div>
            </div>

            <a class="carousel-control-prev" href="#issuesCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon dark" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#issuesCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon dark" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>

    <h2>Archived Issues</h2>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Status</th>
                <th>Archive Date</th>
                <th></th>
            </tr>
        </thead>
            <tbody>
                {% for archived_issue in archived_issues %}
                <tr>
                    <td>{{ archived_issue[0] }}</td>
                    <td>{{ archived_issue[1] }}</td>
                    <td class="
                    {% if archived_issue[3] == 'Open' %}
                    status-open
                    {% elif archived_issue[3] == 'In-Progress' %}
                        status-in-progress
                    {% elif archived_issue[3] == 'Closed' %}
                        status-closed
                    {% endif %}
                    ">{{ archived_issue[3] }}</td>
                    <td>{{ archived_issue[4] }}</td>
                    <td><a class="pure-menu-link" href="/issue_{{ archived_issue[0] }}">View</a></td>
                </tr>
                {% endfor %}
            </tbody>
    </table>

{% endblock %}

